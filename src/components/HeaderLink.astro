---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;
const rawPath = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');
const pathname = rawPath.startsWith('/') ? rawPath : '/' + rawPath;
const isHome = href === '/';
const isActive = isHome
  ? pathname === '/'
  : pathname === href || pathname.startsWith(href + '/');
---

<a href={href} class:list={[className, { active: isActive }]} {...props}>
	<slot />
	<span style="font-size:10px;color:#aaa;">
		<!-- [DEBUG: href={href} | pathname={pathname} | isActive={isActive ? 'ACTIVE' : ''}] -->
	</span>
</a>
<style>
	a {
		display: inline-block;
		text-decoration: none;
	}
	a.active {
		text-decoration: underline;
	}
</style>
